# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞–∂–∏—Ä–æ–≤–∫—É –¥–ª—è ViCueSoft

[![ViCue Soft](https://scontent-hel3-1.xx.fbcdn.net/v/t1.6435-9/100049479_576904839469133_78457503330861056_n.png?_nc_cat=108&ccb=1-5&_nc_sid=973b4a&_nc_ohc=oohtigKncVMAX83Tktk&_nc_ht=scontent-hel3-1.xx&oh=e921e9bcb526f8659fd137b763d0ea50&oe=61D2C460)](https://vicuesoft.com/)

–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏ –≤ –∫–æ–º–ø–∞–Ω–∏–∏ ViCueSoft

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
–°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –º–µ—Ç—Ä–∏–∫–∏ PSNR.

## –ú–µ—Ç—Ä–∏–∫–∞ PSNR
–ü–∏–∫–æ–≤–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ –∫ —à—É–º—É (–∞–Ω–≥–ª. peak signal-to-noise ratio) –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–æ–π [PSNR](https://ru.wikipedia.org/wiki/%D0%9F%D0%B8%D0%BA%D0%BE%D0%B2%D0%BE%D0%B5_%D0%BE%D1%82%D0%BD%D0%BE%D1%88%D0%B5%D0%BD%D0%B8%D0%B5_%D1%81%D0%B8%D0%B3%D0%BD%D0%B0%D0%BB%D0%B0_%D0%BA_%D1%88%D1%83%D0%BC%D1%83)  –∏ —è–≤–ª—è–µ—Ç—Å—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–º —Ç–µ—Ä–º–∏–Ω–æ–º, –æ–∑–Ω–∞—á–∞—é—â–∏–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–µ–∂–¥—É –º–∞–∫—Å–∏–º—É–º–æ–º –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ –∏ –º–æ—â–Ω–æ—Å—Ç—å—é —à—É–º–∞, –∏—Å–∫–∞–∂–∞—é—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –º–Ω–æ–≥–∏–µ —Å–∏–≥–Ω–∞–ª—ã –∏–º–µ—é—Ç —à–∏—Ä–æ–∫–∏–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω, PSNR –æ–±—ã—á–Ω–æ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–æ–π —à–∫–∞–ª–µ –≤ –¥–µ—Ü–∏–±–µ–ª–∞—Ö.

PSNR –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –∏—Å–∫–∞–∂–µ–Ω–∏–π –ø—Ä–∏ —Å–∂–∞—Ç–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ –µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω—É—é –æ—à–∏–±–∫—É (–°–ö–û) –∏–ª–∏ MSE (–∞–Ω–≥–ª. mean square error).

## –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–∏–ª–∏–æ—Ç–µ–∫–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ [FFmpeg](https://www.ffmpeg.org/download.html#build-linux). –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å Linux (Debian):
```
sudo apt install ffmpeg
```
–°–∞–º–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ —Ç–∞–∫, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫. –ü–æ—ç—Ç–æ–º—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª `stb_image.h`
–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ([–∏—Å—Ç–æ—á–Ω–∏–∫](https://github.com/nothings/stb)).

–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
- `stb_image.h` - —Ö–µ–¥–µ—Ä –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `read_file.cpp` - –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–µ—Ç—Ä–∏–∫–∏ PSNR


## –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
---

<div align="center">
  <h4>üí° –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –æ–ø–∏—Å–∞–Ω –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∞ –≤–∏–¥–µ–æ 2000, 3000, 4000, 5000 kbps –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—É–Ω–∫—Ç—ã 03 - 05 –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±–∏—Ç—Ä–µ–π—Ç–æ–≤. üí°</h3>
</div>

---
- `01`: –° [—Å–∞–π—Ç–∞](https://media.xiph.org/video/derf/) –±—ã–ª —Å–∫–∞—á–µ–Ω –≤–∏–¥–µ–æ—Ä—è–¥ `waterfall_cif.y4m` (–¥–∞–ª–µ–µ `refFile`)
- `02`: –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–∞–ø–∫–∞ –≤ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è `refFile` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞, –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤–∏–¥–µ–æ –≤ –æ—Ç—Ç–µ–Ω–∫–∏ —Å–µ—Ä–æ–≥–æ: 
```
ffmpeg -i waterfall_cif.y4m -vf format=gray waterfall_cif_grayscale.y4m'
```
- `03`: –î–ª—è —Å–∂–∞—Ç–∏—è —Ñ–∞–π–ª–∞ –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–∏—Ç—Ä–µ–π—Ç—Ä–∞—Ö –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å –∫–æ–º–∞–Ω–¥–∞:
```
ffmpeg -i waterfall_cif.y4m -c:v libx264 -b:v 1M target_1000.mp4
```
(–¥–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –æ–¥–∏–Ω —Å–∂–∞—Ç—ã–π —Ñ–∞–π–ª –¥–ª—è –±–∏—Ç—Ä–µ–π—Ç–∞ 1000 kbps)
- `04`: –î–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å –∫–æ–º–∞–Ω–¥–∞:
```
ffmpeg -i target_1000.mp4 -f yuv4mpegpipe decoded_target_1000.y4m
```
- `05`: –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è 5 —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤ –æ–Ω–∏ –±—ã–ª–∏ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞—Å–∫–∏–Ω—É—Ç—ã –ø–æ –ø–∞–ø–∫–∞–º



–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞:
ffplay waterfall_cif.y4m

–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–∂–∞—Ç–∏—è –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞:
ffmpeg -i waterfall_cif.y4m -c:v libx264 -b:v 1M target_1000.mp4

–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–µ–∫–æ–¥–∏–Ω–≥–∞ –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞:
ffmpeg -i target_1000.mp4 -f yuv4mpegpipe decoded_target_1000.y4m

## –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –ø–æ–¥ Linux —Å –ø–æ–º–æ—â—å—é GCC
```
g++ read_file.cpp -o app
./app <Source Folder> <Test Folder> <Number of frames>
